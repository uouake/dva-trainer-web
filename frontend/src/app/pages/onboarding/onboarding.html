<div class="onboarding-page">
  <header class="onboarding-header">
    <h1 class="manga-title">ğŸ“š L'Histoire AWS</h1>
    <p class="manga-subtitle">Apprends AWS Ã  travers l'histoire de Yuki et son festival</p>
  </header>

  @if (loading()) {
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p>Chargement de l'histoire...</p>
    </div>
  }

  @if (error()) {
    <div class="error-container">
      <p class="error-message">{{ error() }}</p>
      <button class="retry-btn" (click)="retry()">RÃ©essayer</button>
    </div>
  }

  @if (!loading() && !error()) {
    <!-- Progression globale -->
    @if (progress()) {
      <div class="progress-section">
        <div class="progress-info">
          <span class="progress-label">Progression</span>
          <span class="progress-value">{{ progress()?.completedChapters }} / {{ progress()?.totalChapters }} chapitres</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="progress()?.progressPercentage"></div>
        </div>
      </div>
    }

    <!-- Liste des chapitres -->
    <div class="chapters-list">
      @for (chapter of chapters(); track chapter.id) {
        <div 
          class="chapter-card"
          [class.completed]="chapter.completed"
          [class.has-quiz-score]="chapter.quizScore !== null"
          (click)="navigateToChapter(chapter.id)"
        >
          <div class="chapter-icon">{{ getChapterIcon(chapter.type) }}</div>
          <div class="chapter-content">
            <div class="chapter-number">{{ getChapterNumberLabel(chapter) }}</div>
            <h3 class="chapter-title">{{ chapter.title }}</h3>
          </div>
          <div class="chapter-status">
            @if (chapter.quizScore !== null) {
              <span class="quiz-score">{{ chapter.quizScore }}%</span>
            }
            @if (chapter.completed) {
              <span class="completed-badge">âœ“</span>
            } @else {
              <span class="pending-badge">â†’</span>
            }
          </div>
        </div>
      }
    </div>

    <!-- Bouton architecture -->
    <div class="architecture-section">
      <button class="architecture-btn" (click)="navigateToArchitecture()">
        <span class="btn-icon">ğŸ—ï¸</span>
        <span class="btn-text">Voir l'architecture complÃ¨te</span>
      </button>
    </div>
  }
</div>
