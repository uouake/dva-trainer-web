<div class="dash">
  <!-- Header -->
  <div class="header">
    <h1>Bonjour ðŸ‘‹</h1>
    <p class="muted">PrÃªt Ã  prÃ©parer votre certification AWS DVA-C02 ?</p>
  </div>

  <div *ngIf="loading">Chargementâ€¦</div>
  <div *ngIf="error" class="error">Erreur: {{ error }}</div>

  <!-- Stats -->
  <div class="stats" *ngIf="!loading && !error">
    <div class="stat card" *ngFor="let s of stats">
      <div class="stat-value font-mono">{{ s.value }}</div>
      <div class="stat-label muted">{{ s.label }}</div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="actions" *ngIf="!loading && !error">
    <a
      class="action card"
      *ngFor="let a of actions"
      [routerLink]="a.to"
      [class.action-primary]="a.accent === 'primary'"
      [class.action-success]="a.accent === 'success'"
    >
      <div class="action-top">
        <div class="action-title">{{ a.title }}</div>
        <div class="chev">â€º</div>
      </div>
      <div class="action-desc muted">{{ a.description }}</div>
      <div class="action-cta">{{ a.cta }}</div>
    </a>
  </div>

  <!-- Domain progress -->
  <div class="card domain" *ngIf="!loading && !error">
    <h2>Progression par domaine</h2>

    <div *ngIf="!domainItems.length" class="muted">
      Pas assez de donnÃ©es (ou domaine non renseignÃ©). Fais une routine/exam pour alimenter les stats.
    </div>

    <div class="domain-row" *ngFor="let d of domainItems">
      <div class="domain-head">
        <div class="domain-name">{{ d.label }}</div>
        <div class="domain-count muted font-mono">
          {{ d.attempts }} tentatives â€” {{ d.successRate === null ? 'â€”' : (d.successRate + '%') }}
        </div>
      </div>
      <div class="bar">
        <div class="bar-fill" [style.width.%]="d.successRate ?? 0"></div>
      </div>
    </div>

    <p class="muted domain-hint" style="margin-top:12px">(Le domaine vient du champ <code>domainKey</code> de la banque de questions.)</p>
  </div>

  <!-- Weak concepts -->
  <div class="card domain" *ngIf="!loading && !error">
    <h2>Notions Ã  renforcer</h2>

    <div *ngIf="!weakConcepts.length" class="muted">Aucune erreur enregistrÃ©e pour le moment.</div>

    <ul *ngIf="weakConcepts.length" class="muted" style="margin:0; padding-left:18px">
      <li *ngFor="let w of weakConcepts">
        <span class="font-mono">{{ w.conceptKey }}</span> â€” {{ w.wrongCount }} erreur(s)
      </li>
    </ul>

    <p class="muted domain-hint" style="margin-top:12px">(Le breakdown par domaine arrive dans une itÃ©ration suivante.)</p>
  </div>
</div>
